---
title: "SDK Integration Guide"
description: "Complete technical guide for integrating ad platform SDKs into your React Native, iOS, and Android app — Meta, Firebase/Google, TikTok, Apple Search Ads, and App Tracking Transparency."
---

## The developer's guide to ad SDKs

This page is the technical reference you wish existed when you started. Copy-paste code snippets, dependency setup, and initialization for every major ad platform SDK — with sections for **React Native**, **native iOS (Swift)**, and **native Android (Kotlin)**.

## Why SDKs matter for advertising

Before we get into the code, let's understand why SDKs are so important for app advertising.

<CardGroup cols={3}>
  <Card title="Attribution" icon="route">
    SDKs tell ad platforms "this user came from your ad." Without them, you have no idea which ads are driving installs and revenue.
  </Card>
  <Card title="Optimization" icon="bullseye">
    Ad platforms use SDK event data to find more users like your best ones. Better data means the algorithm works harder for you.
  </Card>
  <Card title="Measurement" icon="chart-bar">
    SDKs send conversion events (sign-ups, purchases) back to the ad platform so you can calculate ROAS and make informed budget decisions.
  </Card>
</CardGroup>

Without properly integrated SDKs, your ad campaigns are flying blind. The platform cannot optimize for conversions it cannot see, and you cannot measure ROAS on actions you are not tracking. Getting SDK integration right is the single most impactful thing you can do before launching ads.

## Quick decision: which SDKs do you need?

<Tabs>
  <Tab title="Just starting (1-2 platforms)">
    Install the direct SDKs for your chosen platforms. It's free and straightforward.

    | Platform | SDK to install |
    |----------|---------------|
    | Meta (Facebook/Instagram) | Meta SDK (`react-native-fbsdk-next` or native) |
    | Google Ads | Firebase SDK (`@react-native-firebase/app` + `analytics`) |
    | TikTok | TikTok Business SDK |
    | Apple Search Ads | No SDK — use Apple's built-in Attribution API |
  </Tab>
  <Tab title="Scaling (3+ platforms)">
    Consider a Mobile Measurement Partner (MMP) instead of individual SDKs:

    | MMP | Pricing | Best for |
    |-----|---------|---------|
    | **Adjust** | From ~$500/mo | Small to mid-size apps |
    | **AppsFlyer** | From ~$600/mo | Mid-size to large apps |
    | **Branch** | Free tier available | Deep linking + attribution |
    | **Singular** | From ~$500/mo | Cost aggregation focus |

    An MMP gives you:
    - Single SDK instead of 4+ platform SDKs
    - Deduplicated attribution (prevents double-counting)
    - Unified reporting across all platforms
    - Fraud detection
  </Tab>
</Tabs>

<Tip>
  **Starting with 1-2 platforms?** Use direct SDKs — save money and complexity. **Scaling to 3+?** Consider an MMP. The breakpoint where an MMP saves more time than it costs is usually around $3,000-5,000/month in ad spend across 3+ platforms.
</Tip>

---

## Meta SDK

The Meta SDK enables event tracking for Facebook and Instagram ads. It sends install events, sign-ups, purchases, and custom events back to Meta so the algorithm can optimize your campaigns.

### React Native

<Steps>
  <Step title="Install the package">
    ```bash
    # Install the Meta SDK for React Native
    npm install react-native-fbsdk-next
    cd ios && pod install && cd ..
    ```
  </Step>
  <Step title="Configure iOS (Info.plist)">
    **`ios/[YourApp]/Info.plist`** — add inside `<dict>`:

    ```xml
    <key>CFBundleURLTypes</key>
    <array>
      <dict>
        <key>CFBundleURLSchemes</key>
        <array>
          <string>fb{YOUR_APP_ID}</string>
        </array>
      </dict>
    </array>
    <key>FacebookAppID</key>
    <string>{YOUR_APP_ID}</string>
    <key>FacebookClientToken</key>
    <string>{YOUR_CLIENT_TOKEN}</string>
    <key>FacebookDisplayName</key>
    <string>{YOUR_APP_NAME}</string>
    <key>LSApplicationQueriesSchemes</key>
    <array>
      <string>fbapi</string>
      <string>fb-messenger-share-api</string>
    </array>
    <key>SKAdNetworkItems</key>
    <array>
      <dict>
        <key>SKAdNetworkIdentifier</key>
        <string>v9wttpbfk9.skadnetwork</string>
      </dict>
      <dict>
        <key>SKAdNetworkIdentifier</key>
        <string>n38lu8286q.skadnetwork</string>
      </dict>
    </array>
    ```

    <Note>
      **Where to find your App ID and Client Token:** Go to [developers.facebook.com](https://developers.facebook.com), select your app, then go to **Settings** > **Basic**. Your App ID is at the top. The Client Token is under **Settings** > **Advanced**.
    </Note>
  </Step>
  <Step title="Configure iOS (AppDelegate)">
    **`ios/[YourApp]/AppDelegate.mm`** — add to the top:

    ```objectivec
    #import <FBSDKCoreKit/FBSDKCoreKit-Swift.h>
    ```

    Inside `application:didFinishLaunchingWithOptions:`:

    ```objectivec
    [[FBSDKApplicationDelegate sharedInstance] application:application
        didFinishLaunchingWithOptions:launchOptions];
    ```

    Add this method for deep linking support:

    ```objectivec
    - (BOOL)application:(UIApplication *)app
                openURL:(NSURL *)url
                options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options
    {
      return [[FBSDKApplicationDelegate sharedInstance] application:app
          openURL:url
          sourceApplication:options[UIApplicationOpenURLOptionsSourceApplicationKey]
          annotation:options[UIApplicationOpenURLOptionsAnnotationKey]];
    }
    ```
  </Step>
  <Step title="Configure Android">
    **`android/app/src/main/res/values/strings.xml`**:

    ```xml
    <string name="facebook_app_id">{YOUR_APP_ID}</string>
    <string name="facebook_client_token">{YOUR_CLIENT_TOKEN}</string>
    ```

    **`android/app/src/main/AndroidManifest.xml`** — add inside `<application>`:

    ```xml
    <meta-data
        android:name="com.facebook.sdk.ApplicationId"
        android:value="@string/facebook_app_id" />
    <meta-data
        android:name="com.facebook.sdk.ClientToken"
        android:value="@string/facebook_client_token" />
    <meta-data
        android:name="com.facebook.sdk.AutoInitEnabled"
        android:value="true" />
    <meta-data
        android:name="com.facebook.sdk.AutoLogAppEventsEnabled"
        android:value="true" />
    <meta-data
        android:name="com.facebook.sdk.AdvertiserIDCollectionEnabled"
        android:value="true" />
    ```
  </Step>
  <Step title="Track events in your app">
    ```typescript
    import { Settings, AppEventsLogger } from 'react-native-fbsdk-next';

    // Initialize (call once in your app's entry point)
    Settings.initializeSDK();

    // Track app activation — call this on every app open
    AppEventsLogger.logEvent('fb_mobile_activate_app');

    // Track registration
    AppEventsLogger.logEvent('fb_mobile_complete_registration', {
      fb_registration_method: 'email',
    });

    // Track purchase (this is the most important event for ROAS)
    AppEventsLogger.logPurchase(9.99, 'USD');

    // Track custom event
    AppEventsLogger.logEvent('level_complete', {
      fb_content_id: 'level_5',
      fb_content_type: 'game_level',
    });

    // Track add to cart
    AppEventsLogger.logEvent('fb_mobile_add_to_cart', {
      fb_content_id: 'product_123',
      fb_content_type: 'product',
      _valueToSum: 29.99,
      fb_currency: 'USD',
    });

    // Track start trial
    AppEventsLogger.logEvent('StartTrial', {
      fb_order_id: 'trial_001',
      fb_currency: 'USD',
    });
    ```
  </Step>
</Steps>

### Native iOS (Swift)

<Steps>
  <Step title="Add the dependency">
    **Using Swift Package Manager (recommended):**
    1. In Xcode, go to **File** > **Add Package Dependencies**
    2. Enter the URL: `https://github.com/facebook/facebook-ios-sdk`
    3. Select packages: **FacebookCore** (required), **FacebookLogin** (optional)

    **Using CocoaPods:**
    ```ruby
    # Podfile
    pod 'FacebookCore'
    ```
  </Step>
  <Step title="Configure Info.plist">
    Add the same Info.plist entries as shown in the React Native section above (FacebookAppID, CFBundleURLTypes, SKAdNetworkItems, etc.).
  </Step>
  <Step title="Initialize in AppDelegate">
    ```swift
    import FacebookCore

    class AppDelegate: UIResponder, UIApplicationDelegate {
        func application(_ application: UIApplication,
            didFinishLaunchingWithOptions launchOptions:
            [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

            ApplicationDelegate.shared.application(
                application,
                didFinishLaunchingWithOptions: launchOptions
            )
            return true
        }

        func application(_ app: UIApplication, open url: URL,
            options: [UIApplication.OpenURLOptionsKey: Any] = [:]) -> Bool {

            ApplicationDelegate.shared.application(
                app,
                open: url,
                sourceApplication: options[
                    UIApplication.OpenURLOptionsKey.sourceApplication
                ] as? String,
                annotation: options[
                    UIApplication.OpenURLOptionsKey.annotation
                ]
            )
        }
    }
    ```
  </Step>
  <Step title="Track events">
    ```swift
    import FacebookCore

    // Registration
    AppEvents.shared.logEvent(.completedRegistration, parameters: [
        .registrationMethod: "email"
    ])

    // Purchase
    AppEvents.shared.logPurchase(amount: 9.99, currency: "USD")

    // Purchase with additional parameters
    AppEvents.shared.logPurchase(amount: 9.99, currency: "USD", parameters: [
        "fb_content_id": "premium_monthly",
        "fb_content_type": "subscription",
    ])

    // Custom event
    AppEvents.shared.logEvent(AppEvents.Name("level_complete"), parameters: [
        "level_id": "level_5"
    ])

    // Start trial
    AppEvents.shared.logEvent(AppEvents.Name("StartTrial"))

    // Add to cart
    AppEvents.shared.logEvent(.addedToCart, parameters: [
        "fb_content_id": "product_123",
        "fb_content_type": "product",
        .init("_valueToSum"): 29.99,
        "fb_currency": "USD",
    ])

    // View content
    AppEvents.shared.logEvent(.viewedContent, parameters: [
        "fb_content_id": "article_456",
        "fb_content_type": "blog_post",
    ])
    ```
  </Step>
</Steps>

### Native Android (Kotlin)

<Steps>
  <Step title="Add the dependency">
    **`build.gradle` (app level):**
    ```kotlin
    dependencies {
        implementation 'com.facebook.android:facebook-android-sdk:latest.release'
    }
    ```
  </Step>
  <Step title="Configure strings.xml and AndroidManifest.xml">
    Use the same configuration shown in the React Native Android section above.
  </Step>
  <Step title="Initialize in your Application class">
    ```kotlin
    import android.app.Application
    import com.facebook.FacebookSdk
    import com.facebook.appevents.AppEventsLogger

    class MyApp : Application() {
        override fun onCreate() {
            super.onCreate()
            FacebookSdk.sdkInitialize(applicationContext)
            AppEventsLogger.activateApp(this)
        }
    }
    ```

    <Warning>
      **Do not forget to register your Application class in AndroidManifest.xml.** Add `android:name=".MyApp"` to the `<application>` tag. Without this, your Application class will never run and the SDK will not initialize.
    </Warning>
  </Step>
  <Step title="Track events">
    ```kotlin
    import com.facebook.appevents.AppEventsLogger
    import android.os.Bundle
    import java.math.BigDecimal
    import java.util.Currency

    val logger = AppEventsLogger.newLogger(context)

    // Registration
    logger.logEvent("fb_mobile_complete_registration",
        Bundle().apply {
            putString("fb_registration_method", "email")
        }
    )

    // Purchase
    logger.logPurchase(
        BigDecimal(9.99),
        Currency.getInstance("USD")
    )

    // Purchase with parameters
    logger.logPurchase(
        BigDecimal(9.99),
        Currency.getInstance("USD"),
        Bundle().apply {
            putString("fb_content_id", "premium_monthly")
            putString("fb_content_type", "subscription")
        }
    )

    // Custom event
    logger.logEvent("level_complete",
        Bundle().apply {
            putString("level_id", "level_5")
        }
    )

    // Add to cart
    logger.logEvent("fb_mobile_add_to_cart",
        Bundle().apply {
            putString("fb_content_id", "product_123")
            putString("fb_content_type", "product")
            putDouble("_valueToSum", 29.99)
            putString("fb_currency", "USD")
        }
    )

    // View content
    logger.logEvent("fb_mobile_content_view",
        Bundle().apply {
            putString("fb_content_id", "article_456")
            putString("fb_content_type", "blog_post")
        }
    )
    ```
  </Step>
</Steps>

---

## Firebase SDK (Google Ads)

Firebase Analytics is the bridge between your app and Google Ads. Install events, audience data, and conversion values flow automatically once linked. Firebase is also a powerful standalone analytics tool and it is completely free.

### React Native

<Steps>
  <Step title="Install packages">
    ```bash
    # Install Firebase core and analytics
    npm install @react-native-firebase/app @react-native-firebase/analytics
    cd ios && pod install && cd ..
    ```
  </Step>
  <Step title="Configure iOS">
    1. Go to [Firebase Console](https://console.firebase.google.com) > create project > add iOS app
    2. Download `GoogleService-Info.plist`
    3. Add it to your Xcode project (drag to `ios/[YourApp]/` and make sure **Copy items if needed** is checked)
    4. The `@react-native-firebase` library handles initialization automatically — no AppDelegate changes needed
  </Step>
  <Step title="Configure Android">
    1. In Firebase Console > add Android app with your package name
    2. Download `google-services.json` and place it in `android/app/`
    3. **`android/build.gradle`** (project level):

    ```groovy
    buildscript {
        dependencies {
            classpath 'com.google.gms:google-services:4.4.0'
        }
    }
    ```

    4. **`android/app/build.gradle`** (app level):

    ```groovy
    apply plugin: 'com.google.gms.google-services'

    dependencies {
        implementation platform('com.google.firebase:firebase-bom:32.7.0')
        implementation 'com.google.firebase:firebase-analytics'
    }
    ```
  </Step>
  <Step title="Track events">
    ```typescript
    import analytics from '@react-native-firebase/analytics';

    // Track screen views (important for understanding user journeys)
    await analytics().logScreenView({
      screen_name: 'Home',
      screen_class: 'HomeScreen',
    });

    // Track sign-up
    await analytics().logSignUp({
      method: 'email',
    });

    // Track purchase
    await analytics().logPurchase({
      value: 9.99,
      currency: 'USD',
      items: [
        {
          item_id: 'premium_monthly',
          item_name: 'Premium Monthly Plan',
          price: 9.99,
        },
      ],
    });

    // Track begin checkout (for subscription flows)
    await analytics().logBeginCheckout({
      value: 9.99,
      currency: 'USD',
    });

    // Track tutorial completion (useful for onboarding)
    await analytics().logTutorialComplete();

    // Track custom events
    await analytics().logEvent('feature_used', {
      feature_name: 'dark_mode',
      feature_category: 'settings',
    });

    // Set user properties (for audience segmentation in Google Ads)
    await analytics().setUserProperty('subscription_type', 'free');
    await analytics().setUserProperty('app_version', '1.2.0');

    // Track start trial
    await analytics().logEvent('start_trial', {
      trial_duration: '7_days',
      plan_name: 'premium',
    });

    // Track add to cart (e-commerce)
    await analytics().logAddToCart({
      items: [{
        item_id: 'SKU_123',
        item_name: 'Blue T-Shirt',
        price: 29.99,
        quantity: 1,
      }],
      value: 29.99,
      currency: 'USD',
    });

    // Track search
    await analytics().logSearch({
      search_term: 'running shoes',
    });
    ```
  </Step>
</Steps>

### Native iOS (Swift)

<Steps>
  <Step title="Add the dependency">
    **Using Swift Package Manager (recommended):**
    1. In Xcode, go to **File** > **Add Package Dependencies**
    2. Enter the URL: `https://github.com/firebase/firebase-ios-sdk`
    3. Select package: **FirebaseAnalytics**

    **Using CocoaPods:**
    ```ruby
    # Podfile
    pod 'FirebaseAnalytics'
    ```
  </Step>
  <Step title="Add config file">
    Download `GoogleService-Info.plist` from Firebase Console and add it to your Xcode project root.
  </Step>
  <Step title="Initialize in AppDelegate">
    ```swift
    import FirebaseCore

    class AppDelegate: UIResponder, UIApplicationDelegate {
        func application(_ application: UIApplication,
            didFinishLaunchingWithOptions launchOptions:
            [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

            FirebaseApp.configure()
            return true
        }
    }
    ```

    <Warning>
      **`FirebaseApp.configure()` must be the first thing in `didFinishLaunchingWithOptions`.** If you call other SDK initialization methods before Firebase, some automatic events may not be captured.
    </Warning>
  </Step>
  <Step title="Track events">
    ```swift
    import FirebaseAnalytics

    // Sign up
    Analytics.logEvent(AnalyticsEventSignUp, parameters: [
        AnalyticsParameterMethod: "email"
    ])

    // Purchase
    Analytics.logEvent(AnalyticsEventPurchase, parameters: [
        AnalyticsParameterValue: 9.99,
        AnalyticsParameterCurrency: "USD",
        AnalyticsParameterItemID: "premium_monthly"
    ])

    // Screen view
    Analytics.logEvent(AnalyticsEventScreenView, parameters: [
        AnalyticsParameterScreenName: "Home",
        AnalyticsParameterScreenClass: "HomeViewController"
    ])

    // Custom event
    Analytics.logEvent("feature_used", parameters: [
        "feature_name": "dark_mode"
    ])

    // Begin checkout
    Analytics.logEvent(AnalyticsEventBeginCheckout, parameters: [
        AnalyticsParameterValue: 9.99,
        AnalyticsParameterCurrency: "USD"
    ])

    // Tutorial complete
    Analytics.logEvent(AnalyticsEventTutorialComplete, parameters: nil)

    // Add to cart
    Analytics.logEvent(AnalyticsEventAddToCart, parameters: [
        AnalyticsParameterItemID: "SKU_123",
        AnalyticsParameterItemName: "Blue T-Shirt",
        AnalyticsParameterValue: 29.99,
        AnalyticsParameterCurrency: "USD"
    ])

    // User properties (for audience segmentation)
    Analytics.setUserProperty("free", forName: "subscription_type")
    ```
  </Step>
</Steps>

### Native Android (Kotlin)

<Steps>
  <Step title="Add dependencies">
    **`build.gradle` (project level):**
    ```kotlin
    buildscript {
        dependencies {
            classpath 'com.google.gms:google-services:4.4.0'
        }
    }
    ```

    **`build.gradle` (app level):**
    ```kotlin
    plugins {
        id 'com.google.gms.google-services'
    }
    dependencies {
        implementation platform('com.google.firebase:firebase-bom:32.7.0')
        implementation 'com.google.firebase:firebase-analytics'
    }
    ```
  </Step>
  <Step title="Add config file">
    Download `google-services.json` from Firebase Console and place it in the `android/app/` directory.
  </Step>
  <Step title="Track events">
    Firebase auto-initializes on Android — no Application class changes needed.

    ```kotlin
    import com.google.firebase.analytics.FirebaseAnalytics
    import com.google.firebase.analytics.ktx.analytics
    import com.google.firebase.analytics.ktx.logEvent
    import com.google.firebase.ktx.Firebase

    val analytics = Firebase.analytics

    // Sign up
    analytics.logEvent(FirebaseAnalytics.Event.SIGN_UP) {
        param(FirebaseAnalytics.Param.METHOD, "email")
    }

    // Purchase
    analytics.logEvent(FirebaseAnalytics.Event.PURCHASE) {
        param(FirebaseAnalytics.Param.VALUE, 9.99)
        param(FirebaseAnalytics.Param.CURRENCY, "USD")
        param(FirebaseAnalytics.Param.ITEM_ID, "premium_monthly")
    }

    // Screen view
    analytics.logEvent(FirebaseAnalytics.Event.SCREEN_VIEW) {
        param(FirebaseAnalytics.Param.SCREEN_NAME, "Home")
        param(FirebaseAnalytics.Param.SCREEN_CLASS, "HomeActivity")
    }

    // Custom event
    analytics.logEvent("feature_used") {
        param("feature_name", "dark_mode")
    }

    // Begin checkout
    analytics.logEvent(FirebaseAnalytics.Event.BEGIN_CHECKOUT) {
        param(FirebaseAnalytics.Param.VALUE, 9.99)
        param(FirebaseAnalytics.Param.CURRENCY, "USD")
    }

    // Tutorial complete
    analytics.logEvent(FirebaseAnalytics.Event.TUTORIAL_COMPLETE) {}

    // Add to cart
    analytics.logEvent(FirebaseAnalytics.Event.ADD_TO_CART) {
        param(FirebaseAnalytics.Param.ITEM_ID, "SKU_123")
        param(FirebaseAnalytics.Param.ITEM_NAME, "Blue T-Shirt")
        param(FirebaseAnalytics.Param.VALUE, 29.99)
        param(FirebaseAnalytics.Param.CURRENCY, "USD")
    }

    // User properties
    analytics.setUserProperty("subscription_type", "free")
    ```
  </Step>
</Steps>

---

## TikTok SDK

TikTok's Business SDK enables event tracking for TikTok ads. It works similarly to the Meta SDK — you send events back to TikTok so the algorithm can optimize your campaigns.

### React Native

There is no official React Native TikTok SDK. You have two options:

<Tabs>
  <Tab title="Option A: Native modules (recommended)">
    Install the TikTok SDK natively on each platform and create a React Native bridge.

    **iOS** — add to your Podfile:
    ```ruby
    pod 'TikTokBusinessSDK'
    ```

    **Android** — add to `app/build.gradle`:
    ```groovy
    implementation 'com.tiktok.business.sdk:tiktok-business-android-sdk:latest.release'
    ```

    Run `cd ios && pod install && cd ..` after updating the Podfile.

    Then create a TypeScript bridge module to call from your React Native code:

    ```typescript
    // TikTokBridge.ts — a clean wrapper around the native modules
    import { NativeModules, Platform } from 'react-native';

    const { TikTokModule } = NativeModules;

    export const TikTok = {
      trackEvent: (eventName: string, params?: Record<string, any>) => {
        TikTokModule?.trackEvent(eventName, params || {});
      },
      trackPurchase: (amount: number, currency: string = 'USD') => {
        TikTokModule?.trackEvent('Purchase', {
          value: amount,
          currency: currency,
        });
      },
      trackRegistration: (method: string = 'email') => {
        TikTokModule?.trackEvent('CompleteRegistration', {
          registration_method: method,
        });
      },
      trackAddToCart: (amount: number, contentId: string, currency: string = 'USD') => {
        TikTokModule?.trackEvent('AddToCart', {
          value: amount,
          currency: currency,
          content_id: contentId,
        });
      },
      trackViewContent: (contentId: string, contentType: string) => {
        TikTokModule?.trackEvent('ViewContent', {
          content_id: contentId,
          content_type: contentType,
        });
      },
    };
    ```

    You will also need to create native bridge modules on both platforms. Here is the iOS side:

    ```swift
    // ios/TikTokModule.swift
    import Foundation
    import TikTokBusinessSDK

    @objc(TikTokModule)
    class TikTokModule: NSObject {

      @objc
      func trackEvent(_ eventName: String, params: NSDictionary) {
        if params.count > 0 {
          TikTokBusiness.trackEvent(eventName,
            withProperties: params as? [String: Any] ?? [:])
        } else {
          TikTokBusiness.trackEvent(eventName)
        }
      }

      @objc
      static func requiresMainQueueSetup() -> Bool {
        return false
      }
    }
    ```

    And the Android side:

    ```kotlin
    // android/app/src/main/java/com/yourapp/TikTokModule.kt
    package com.yourapp

    import com.facebook.react.bridge.ReactApplicationContext
    import com.facebook.react.bridge.ReactContextBaseJavaModule
    import com.facebook.react.bridge.ReactMethod
    import com.facebook.react.bridge.ReadableMap
    import com.tiktok.TikTokBusinessSdk
    import org.json.JSONObject

    class TikTokModule(reactContext: ReactApplicationContext)
      : ReactContextBaseJavaModule(reactContext) {

      override fun getName() = "TikTokModule"

      @ReactMethod
      fun trackEvent(eventName: String, params: ReadableMap?) {
        val jsonParams = JSONObject()
        params?.toHashMap()?.forEach { (key, value) ->
          jsonParams.put(key, value)
        }
        TikTokBusinessSdk.trackEvent(eventName, jsonParams)
      }
    }
    ```
  </Tab>
  <Tab title="Option B: Use an MMP">
    If you're using an MMP (Adjust, AppsFlyer, etc.), it handles TikTok attribution without the TikTok SDK. You install one MMP SDK and configure TikTok as a partner in the MMP dashboard.

    This is the easier path if you are on 3+ platforms. The MMP handles:
    - Sending events to TikTok on your behalf
    - Deduplicating attribution across platforms
    - Mapping your events to TikTok's expected event names

    **How to set it up with AppsFlyer (example):**
    1. In the AppsFlyer dashboard, go to **Integrated Partners** > search for **TikTok for Business**
    2. Toggle **Activate Partner**
    3. Enter your TikTok App ID
    4. Map your in-app events to TikTok events (e.g., `af_purchase` to `Purchase`)
    5. Enable **Cost Data** to pull spend data from TikTok into AppsFlyer
  </Tab>
</Tabs>

### Native iOS (Swift)

<Steps>
  <Step title="Add the dependency">
    **CocoaPods:**
    ```ruby
    pod 'TikTokBusinessSDK'
    ```

    **Swift Package Manager:**
    Add the TikTok Business SDK package URL from the TikTok developer docs.
  </Step>
  <Step title="Initialize in AppDelegate">
    ```swift
    import TikTokBusinessSDK

    class AppDelegate: UIResponder, UIApplicationDelegate {
        func application(_ application: UIApplication,
            didFinishLaunchingWithOptions launchOptions:
            [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

            let config = TikTokConfig(appId: "YOUR_APP_ID",
                                       tiktokAppId: "YOUR_TIKTOK_APP_ID")
            config.setLogLevel(.info) // Use .none for production
            TikTokBusiness.initializeSdk(config)

            return true
        }
    }
    ```

    <Note>
      **Where to find your IDs:** Your `appId` is your TikTok Marketing API App ID. Your `tiktokAppId` is the ID from TikTok Ads Manager under **Assets** > **Events** > **App Events**. These are different values.
    </Note>
  </Step>
  <Step title="Track events">
    ```swift
    // Registration
    TikTokBusiness.trackEvent("CompleteRegistration")

    // Registration with parameters
    TikTokBusiness.trackEvent("CompleteRegistration", withProperties: [
        "registration_method": "email"
    ])

    // Purchase (most important event)
    TikTokBusiness.trackEvent("Purchase", withProperties: [
        "value": 9.99,
        "currency": "USD",
        "content_id": "premium_monthly"
    ])

    // Add to cart
    TikTokBusiness.trackEvent("AddToCart", withProperties: [
        "value": 29.99,
        "currency": "USD",
        "content_id": "product_123"
    ])

    // View content
    TikTokBusiness.trackEvent("ViewContent", withProperties: [
        "content_id": "article_456",
        "content_type": "blog_post"
    ])

    // Subscribe
    TikTokBusiness.trackEvent("Subscribe", withProperties: [
        "value": 9.99,
        "currency": "USD"
    ])

    // Start checkout
    TikTokBusiness.trackEvent("InitiateCheckout", withProperties: [
        "value": 59.98,
        "currency": "USD",
        "quantity": 2
    ])
    ```
  </Step>
</Steps>

### Native Android (Kotlin)

<Steps>
  <Step title="Add the dependency">
    **`build.gradle` (app level):**
    ```kotlin
    dependencies {
        implementation 'com.tiktok.business.sdk:tiktok-business-android-sdk:latest.release'
    }
    ```
  </Step>
  <Step title="Initialize in your Application class">
    ```kotlin
    import android.app.Application
    import com.tiktok.TikTokBusinessSdk

    class MyApp : Application() {
        override fun onCreate() {
            super.onCreate()
            val config = TikTokBusinessSdk.TTConfig(applicationContext)
                .setAppId("YOUR_APP_ID")
                .setTTAppId("YOUR_TIKTOK_APP_ID")
                .setLogLevel(TikTokBusinessSdk.LogLevel.INFO) // Use NONE for production
            TikTokBusinessSdk.initializeSdk(config)
        }
    }
    ```
  </Step>
  <Step title="Track events">
    ```kotlin
    import com.tiktok.TikTokBusinessSdk
    import org.json.JSONObject

    // Registration
    TikTokBusinessSdk.trackEvent("CompleteRegistration")

    // Purchase
    TikTokBusinessSdk.trackEvent("Purchase",
        JSONObject().apply {
            put("value", 9.99)
            put("currency", "USD")
            put("content_id", "premium_monthly")
        }
    )

    // Add to cart
    TikTokBusinessSdk.trackEvent("AddToCart",
        JSONObject().apply {
            put("value", 29.99)
            put("currency", "USD")
            put("content_id", "product_123")
        }
    )

    // View content
    TikTokBusinessSdk.trackEvent("ViewContent",
        JSONObject().apply {
            put("content_id", "article_456")
            put("content_type", "blog_post")
        }
    )

    // Subscribe
    TikTokBusinessSdk.trackEvent("Subscribe",
        JSONObject().apply {
            put("value", 9.99)
            put("currency", "USD")
        }
    )

    // Initiate checkout
    TikTokBusinessSdk.trackEvent("InitiateCheckout",
        JSONObject().apply {
            put("value", 59.98)
            put("currency", "USD")
            put("quantity", 2)
        }
    )
    ```
  </Step>
</Steps>

---

## Apple Search Ads Attribution API

Apple Search Ads doesn't require a traditional SDK. Instead, you use Apple's built-in attribution API to check if an install came from a Search Ad. This makes it the simplest integration of all four platforms.

### React Native

```bash
# Install a community package for Apple Search Ads
npm install react-native-apple-search-ads-attribution
# OR use the Apple AdServices framework directly via native module
```

```typescript
// Using Apple's AdServices framework (iOS 14.3+)
import { NativeModules, Platform } from 'react-native';

async function checkAppleSearchAdsAttribution() {
  if (Platform.OS !== 'ios') return null;

  try {
    const { AppleSearchAds } = NativeModules;
    const token = await AppleSearchAds.getAttributionToken();

    // Send this token to Apple's attribution API
    const response = await fetch(
      'https://api-adservices.apple.com/api/v1/',
      {
        method: 'POST',
        headers: { 'Content-Type': 'text/plain' },
        body: token,
      }
    );

    const data = await response.json();
    // data contains: attribution, orgId, campaignId, adGroupId, keywordId, etc.
    return data;
  } catch (error) {
    // User didn't come from a Search Ad, or attribution not available
    return null;
  }
}

// Call this on app launch — only needs to run once per install
checkAppleSearchAdsAttribution().then((attribution) => {
  if (attribution?.attribution) {
    console.log('User came from Apple Search Ads!');
    console.log('Campaign:', attribution.campaignId);
    console.log('Ad Group:', attribution.adGroupId);
    console.log('Keyword:', attribution.keywordId);
    // Send this to your analytics for attribution tracking
  }
});
```

### Native iOS (Swift)

```swift
// No SDK needed — use Apple's built-in framework
import AdServices

class AttributionManager {

    // Call this once on first app launch
    static func checkAttribution() {
        // iOS 14.3+ — AdServices framework
        if #available(iOS 14.3, *) {
            do {
                let token = try AAAttribution.attributionToken()

                // Send token to Apple's API
                var request = URLRequest(
                    url: URL(string: "https://api-adservices.apple.com/api/v1/")!
                )
                request.httpMethod = "POST"
                request.setValue("text/plain", forHTTPHeaderField: "Content-Type")
                request.httpBody = Data(token.utf8)

                URLSession.shared.dataTask(with: request) { data, response, error in
                    guard let data = data,
                          let json = try? JSONSerialization.jsonObject(with: data)
                              as? [String: Any] else {
                        return
                    }

                    if json["attribution"] as? Bool == true {
                        // This install was from Apple Search Ads
                        let campaignId = json["campaignId"] as? Int
                        let adGroupId = json["adGroupId"] as? Int
                        let keywordId = json["keywordId"] as? Int
                        // Log this to your analytics
                        print("ASA Attribution - Campaign: \(campaignId ?? 0)")
                    }
                }.resume()
            } catch {
                // Attribution token not available — user didn't come from ASA
            }
        }
    }
}

// Call on app launch
AttributionManager.checkAttribution()
```

<Tip>
  **Apple Search Ads attribution is only available on iOS.** There is no Android equivalent. The attribution token should be fetched within 24 hours of install for best accuracy. Call it on first app launch and store the result so you don't make unnecessary API calls on subsequent launches.
</Tip>

---

## MMP SDK integration (AppsFlyer example)

If you are running ads on 3+ platforms, a Mobile Measurement Partner (MMP) simplifies everything. Instead of integrating 4 separate SDKs, you integrate one MMP SDK that handles attribution for all platforms. Here is how to integrate AppsFlyer as an example.

### React Native (AppsFlyer)

<Steps>
  <Step title="Install the package">
    ```bash
    npm install react-native-appsflyer
    cd ios && pod install && cd ..
    ```
  </Step>
  <Step title="Initialize the SDK">
    ```typescript
    import appsFlyer from 'react-native-appsflyer';

    // Initialize on app start
    appsFlyer.initSdk(
      {
        devKey: 'YOUR_DEV_KEY',         // From AppsFlyer dashboard
        isDebug: false,                  // Set true for development
        appId: 'YOUR_APPLE_APP_ID',     // iOS App Store ID (numbers only)
        onInstallConversionDataListener: true,
        onDeepLinkListener: true,
      },
      (result) => {
        console.log('AppsFlyer initialized:', result);
      },
      (error) => {
        console.error('AppsFlyer error:', error);
      }
    );

    // Listen for attribution data (tells you which ad drove the install)
    appsFlyer.onInstallConversionData((data) => {
      const status = data.data.af_status;
      if (status === 'Non-organic') {
        // User came from an ad
        const source = data.data.media_source;  // e.g., "Meta Ads"
        const campaign = data.data.campaign;     // e.g., "US_iOS_Lookalike"
        console.log(`Install from: ${source}, campaign: ${campaign}`);
      } else {
        // Organic install
        console.log('Organic install');
      }
    });
    ```
  </Step>
  <Step title="Track events">
    ```typescript
    import appsFlyer from 'react-native-appsflyer';

    // Registration
    appsFlyer.logEvent('af_complete_registration', {
      af_registration_method: 'email',
    });

    // Purchase
    appsFlyer.logEvent('af_purchase', {
      af_revenue: 9.99,
      af_currency: 'USD',
      af_content_id: 'premium_monthly',
      af_order_id: 'order_12345',
    });

    // Add to cart
    appsFlyer.logEvent('af_add_to_cart', {
      af_content_id: 'product_123',
      af_price: 29.99,
      af_currency: 'USD',
    });

    // Start trial
    appsFlyer.logEvent('af_start_trial', {
      af_price: 0,
      af_currency: 'USD',
    });

    // Custom event
    appsFlyer.logEvent('feature_used', {
      feature_name: 'dark_mode',
    });
    ```

    <Note>
      **AppsFlyer automatically forwards these events to connected partners.** Once you configure Meta, Google, and TikTok as partners in the AppsFlyer dashboard, your in-app events are sent to all of them without additional SDK code.
    </Note>
  </Step>
</Steps>

### Native iOS — AppsFlyer (Swift)

```swift
import AppsFlyerLib

class AppDelegate: UIResponder, UIApplicationDelegate {
    func application(_ application: UIApplication,
        didFinishLaunchingWithOptions launchOptions:
        [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

        AppsFlyerLib.shared().appsFlyerDevKey = "YOUR_DEV_KEY"
        AppsFlyerLib.shared().appleAppID = "YOUR_APPLE_APP_ID"
        AppsFlyerLib.shared().isDebug = false // true for development
        AppsFlyerLib.shared().delegate = self

        return true
    }

    func applicationDidBecomeActive(_ application: UIApplication) {
        AppsFlyerLib.shared().start()
    }
}

// Track events
AppsFlyerLib.shared().logEvent("af_purchase", withValues: [
    AFEventParamRevenue: 9.99,
    AFEventParamCurrency: "USD",
    AFEventParamContentId: "premium_monthly"
])

AppsFlyerLib.shared().logEvent("af_complete_registration", withValues: [
    "af_registration_method": "email"
])
```

### Native Android — AppsFlyer (Kotlin)

```kotlin
import com.appsflyer.AppsFlyerLib
import com.appsflyer.AFInAppEventParameterName

class MyApp : Application() {
    override fun onCreate() {
        super.onCreate()
        AppsFlyerLib.getInstance().init("YOUR_DEV_KEY", null, this)
        AppsFlyerLib.getInstance().start(this)
    }
}

// Track events
val eventValues = HashMap<String, Any>()
eventValues[AFInAppEventParameterName.REVENUE] = 9.99
eventValues[AFInAppEventParameterName.CURRENCY] = "USD"
eventValues[AFInAppEventParameterName.CONTENT_ID] = "premium_monthly"
AppsFlyerLib.getInstance().logEvent(context, "af_purchase", eventValues)
```

---

## Server-side event tracking

For critical events like purchases, you should also send events from your server. Server-side tracking is more reliable than client-side because it is not affected by app crashes, network issues, or users closing the app before the event fires.

### When to use server-side tracking

| Event type | Client-side | Server-side | Both (recommended) |
|-----------|-------------|-------------|-------------------|
| App open | Yes | No | No |
| Sign up | Yes | Optional | For high-value apps |
| Purchase | Yes | **Yes** | **Yes** |
| Subscription renewal | No | **Yes** | N/A |
| Refund | No | **Yes** | N/A |

### Example: server-side purchase event to Meta

```typescript
// Node.js server — send purchase event to Meta Conversions API
import crypto from 'crypto';

const hashSHA256 = (value: string): string =>
  crypto.createHash('sha256').update(value).digest('hex');

const sendPurchaseToMeta = async (purchase: {
  userId: string;
  email: string;
  amount: number;
  currency: string;
  orderId: string;
}) => {
  const pixelId = process.env.META_PIXEL_ID;
  const accessToken = process.env.META_ACCESS_TOKEN;

  const response = await fetch(
    `https://graph.facebook.com/v18.0/${pixelId}/events`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        data: [{
          event_name: 'Purchase',
          event_time: Math.floor(Date.now() / 1000),
          event_id: `purchase_${purchase.orderId}`, // for deduplication
          action_source: 'app',
          user_data: {
            em: hashSHA256(purchase.email.toLowerCase().trim()),
            external_id: hashSHA256(purchase.userId),
          },
          custom_data: {
            currency: purchase.currency,
            value: purchase.amount,
            order_id: purchase.orderId,
          },
        }],
        access_token: accessToken,
      }),
    }
  );

  return response.json();
};
```

### Example: server-side event to AppsFlyer

```typescript
// Node.js server — send server-to-server event to AppsFlyer
const sendEventToAppsFlyer = async (event: {
  appsflyerId: string;
  eventName: string;
  eventValue: Record<string, any>;
}) => {
  const response = await fetch(
    'https://api2.appsflyer.com/inappevent/com.yourapp.id',
    {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'authentication': process.env.APPSFLYER_DEV_KEY!,
      },
      body: JSON.stringify({
        appsflyer_id: event.appsflyerId,
        eventName: event.eventName,
        eventValue: JSON.stringify(event.eventValue),
        af_events_api: 'true',
      }),
    }
  );

  return response.json();
};

// Usage
await sendEventToAppsFlyer({
  appsflyerId: 'user_appsflyer_id_here',
  eventName: 'af_purchase',
  eventValue: {
    af_revenue: 9.99,
    af_currency: 'USD',
    af_order_id: 'order_12345',
  },
});
```

---

## iOS App Tracking Transparency (ATT)

ATT is **required** for all ad SDKs on iOS 14.5+. If you don't implement it, you get limited tracking data and worse ad performance.

### What ATT does

When a user allows tracking, ad platforms can use Apple's IDFA (Identifier for Advertisers) to:
- Track which ad led to an install
- Build retargeting audiences
- Optimize ad delivery for conversions

When a user denies tracking, ad platforms fall back to Apple's SKAdNetwork, which provides limited, delayed, aggregated data.

### Best practices for ATT timing

<Warning>
  **Don't show the ATT prompt on first launch.** Users who haven't experienced your app yet almost always deny tracking (opt-in rates: 10-15%). Wait until they've completed onboarding or experienced a key feature — opt-in rates can jump to 30-50%+.
</Warning>

**Optimal ATT timing strategies:**

| Strategy | When to show | Expected opt-in rate | Best for |
|----------|-------------|---------------------|---------|
| After onboarding | User completes tutorial/setup | 25-40% | Most apps |
| After first value moment | User experiences key benefit | 30-50% | Apps with quick value delivery |
| After registration | User creates account | 35-45% | Apps requiring sign-up |
| Pre-prompt + explanation | Show a custom screen BEFORE the system dialog | 35-50% | All apps (recommended) |

### Implementing ATT with a pre-prompt (recommended)

The pre-prompt strategy shows your own custom explanation screen before the system ATT dialog. This dramatically increases opt-in rates because users understand why they are being asked.

#### React Native

```typescript
import { useEffect, useState } from 'react';
import { View, Text, TouchableOpacity, StyleSheet, Platform } from 'react-native';
import { Settings } from 'react-native-fbsdk-next';

// If using Expo:
import { requestTrackingPermissionsAsync, getTrackingPermissionsAsync }
  from 'expo-tracking-transparency';

// If NOT using Expo, use:
// import { requestTrackingPermission, getTrackingStatus }
//   from 'react-native-tracking-transparency';

// Pre-prompt screen component — show this BEFORE the system ATT dialog
function TrackingPermissionScreen({ onComplete }: { onComplete: () => void }) {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Help us improve your experience</Text>
      <Text style={styles.body}>
        We'd like to use your data to show you more relevant content
        and ads. This helps keep the app free and allows us to keep
        improving it for you.
      </Text>
      <Text style={styles.detail}>
        You can change this in Settings at any time.
      </Text>

      <TouchableOpacity style={styles.button} onPress={onComplete}>
        <Text style={styles.buttonText}>Continue</Text>
      </TouchableOpacity>
    </View>
  );
}

// Main tracking permission logic
async function requestTracking() {
  if (Platform.OS !== 'ios') return;

  const { status: existingStatus } = await getTrackingPermissionsAsync();

  if (existingStatus === 'undetermined') {
    // Show pre-prompt screen first (handled by your app's navigation)
    // Then when user taps "Continue", show the system dialog:
    const { status } = await requestTrackingPermissionsAsync();

    if (status === 'granted') {
      await Settings.setAdvertiserTrackingEnabled(true);
    } else {
      await Settings.setAdvertiserTrackingEnabled(false);
    }
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 40,
    backgroundColor: '#fff',
  },
  title: {
    fontSize: 22,
    fontWeight: 'bold',
    marginBottom: 16,
    textAlign: 'center',
  },
  body: {
    fontSize: 16,
    color: '#555',
    textAlign: 'center',
    marginBottom: 12,
    lineHeight: 24,
  },
  detail: {
    fontSize: 14,
    color: '#888',
    textAlign: 'center',
    marginBottom: 32,
  },
  button: {
    backgroundColor: '#007AFF',
    paddingHorizontal: 32,
    paddingVertical: 14,
    borderRadius: 12,
  },
  buttonText: {
    color: '#fff',
    fontSize: 17,
    fontWeight: '600',
  },
});
```

#### Native iOS (Swift)

```swift
import AppTrackingTransparency
import FacebookCore

class TrackingManager {

    // Call this AFTER onboarding or first value moment
    static func requestTrackingPermission(from viewController: UIViewController) {
        // Check if already determined
        if ATTrackingManager.trackingAuthorizationStatus == .notDetermined {
            // Show pre-prompt first
            showPrePrompt(from: viewController) {
                // Then show system dialog
                ATTrackingManager.requestTrackingAuthorization { status in
                    DispatchQueue.main.async {
                        switch status {
                        case .authorized:
                            // Full tracking enabled
                            Settings.shared.isAdvertiserTrackingEnabled = true
                            print("ATT: Authorized")
                        case .denied, .restricted:
                            // Limited tracking — SKAN only
                            Settings.shared.isAdvertiserTrackingEnabled = false
                            print("ATT: Denied/Restricted")
                        case .notDetermined:
                            print("ATT: Not determined")
                        @unknown default:
                            break
                        }
                    }
                }
            }
        }
    }

    private static func showPrePrompt(
        from viewController: UIViewController,
        completion: @escaping () -> Void
    ) {
        let alert = UIAlertController(
            title: "Help Us Improve Your Experience",
            message: "We'd like to use your data to show you more relevant "
                + "content and keep the app free. You can change this anytime "
                + "in Settings.",
            preferredStyle: .alert
        )
        alert.addAction(UIAlertAction(title: "Continue", style: .default) { _ in
            completion()
        })
        viewController.present(alert, animated: true)
    }
}
```

### Info.plist entry (required)

This string appears in the system ATT dialog. Make it clear and user-friendly:

```xml
<key>NSUserTrackingUsageDescription</key>
<string>Your data helps us show you relevant ads and keep the app free. You can change this anytime in Settings.</string>
```

<Tip>
  **Customize the NSUserTrackingUsageDescription.** Apple rejects generic descriptions. Be specific about how tracking benefits the user. Good: "Your data helps us show you relevant fitness content and offers." Bad: "We need this for advertising."
</Tip>

---

## Standard events reference

Use this table to map the same user action across all platforms. This is your reference for ensuring consistent tracking:

| User action | Meta event | Firebase event | TikTok event | AppsFlyer event |
|-------------|-----------|---------------|-------------|----------------|
| **App install** | Automatic | `first_open` (auto) | Automatic | Automatic |
| **App open** | `fb_mobile_activate_app` | `app_open` (auto) | Automatic | Automatic |
| **Sign up** | `fb_mobile_complete_registration` | `sign_up` | `CompleteRegistration` | `af_complete_registration` |
| **Complete tutorial** | `fb_mobile_tutorial_completion` | `tutorial_complete` | `CompleteTutorial` | `af_tutorial_completion` |
| **View content** | `fb_mobile_content_view` | `view_item` | `ViewContent` | `af_content_view` |
| **Search** | `fb_mobile_search` | `search` | `Search` | `af_search` |
| **Add to cart** | `fb_mobile_add_to_cart` | `add_to_cart` | `AddToCart` | `af_add_to_cart` |
| **Begin checkout** | `fb_mobile_initiated_checkout` | `begin_checkout` | `InitiateCheckout` | `af_initiated_checkout` |
| **Purchase** | `logPurchase()` | `purchase` | `Purchase` | `af_purchase` |
| **Start trial** | `StartTrial` | `start_trial` | `Subscribe` | `af_start_trial` |
| **Subscribe** | `Subscribe` | `subscribe` (custom) | `Subscribe` | `af_subscribe` |
| **Rate app** | `fb_mobile_rate` | `rate` (custom) | N/A | `af_rate` |
| **Share** | `fb_mobile_share` | `share` | N/A | `af_share` |

<Note>
  **You don't need to track all of these.** Start with the bold essentials: **install** (automatic), **sign up**, and **purchase**. Add more events as you need them for optimization. Every event you track should answer a question you're actively trying to answer.
</Note>

---

## Debugging SDK events

Getting events to fire correctly is half the battle. Here is how to debug each platform.

### Debug mode for each platform

<Tabs>
  <Tab title="Meta">
    **Option 1: Events Manager Test Events (recommended)**
    1. Go to [facebook.com/events_manager](https://www.facebook.com/events_manager)
    2. Select your app
    3. Click **Test Events**
    4. Open your app on a real device
    5. Perform actions (sign up, purchase) and watch events appear in real-time

    **Option 2: Enable debug logging in your app**
    ```typescript
    // React Native — add this during development only
    import { Settings } from 'react-native-fbsdk-next';
    Settings.setDebugEnabled(true); // Remove in production!
    ```

    ```swift
    // iOS — add launch argument in Xcode
    // Edit Scheme > Arguments > Add: -FBSDKDebugEnabled YES
    ```

    **What to check:**
    - Events appear within 30 seconds in Test Events
    - Event names match exactly (case-sensitive)
    - Parameters have correct types (numbers not strings for values)
    - Purchase events include both value and currency
  </Tab>
  <Tab title="Firebase">
    **Enable debug mode:**

    iOS (Xcode):
    ```
    Product > Scheme > Edit Scheme > Arguments > Add:
    -FIRAnalyticsDebugEnabled
    ```

    Android (terminal):
    ```bash
    adb shell setprop debug.firebase.analytics.app your.package.name
    ```

    Then check: **Firebase Console** > **Analytics** > **DebugView**

    Events appear in real-time (within seconds, not the usual 24-hour delay).

    **What to check:**
    - Events show up in DebugView immediately
    - Custom parameters are attached correctly
    - User properties are set
    - Screen names are correct in screen_view events

    **To disable debug mode when done:**
    ```bash
    # Android
    adb shell setprop debug.firebase.analytics.app .none.
    ```
  </Tab>
  <Tab title="TikTok">
    **Option 1: Test Mode in Events Manager**
    1. Go to TikTok Events Manager
    2. Select your app
    3. Enable Test Mode
    4. Perform actions and verify events appear

    **Option 2: Enable debug logging**
    ```swift
    // iOS
    let config = TikTokConfig(appId: "YOUR_APP_ID",
                               tiktokAppId: "YOUR_TIKTOK_APP_ID")
    config.setLogLevel(.debug) // Remove in production!
    ```

    ```kotlin
    // Android
    val config = TikTokBusinessSdk.TTConfig(applicationContext)
        .setAppId("YOUR_APP_ID")
        .setTTAppId("YOUR_TIKTOK_APP_ID")
        .setLogLevel(TikTokBusinessSdk.LogLevel.DEBUG) // Remove in production!
    ```
  </Tab>
  <Tab title="AppsFlyer">
    **Enable debug mode:**
    ```typescript
    // React Native
    appsFlyer.initSdk({
      devKey: 'YOUR_DEV_KEY',
      isDebug: true, // Remove in production!
      // ... rest of config
    });
    ```

    ```swift
    // iOS
    AppsFlyerLib.shared().isDebug = true // Remove in production!
    ```

    **Check the dashboard:**
    1. Go to AppsFlyer dashboard > **Test Devices**
    2. Add your test device by advertising ID
    3. Perform actions and verify events appear in real-time

    **What to check:**
    - Conversion data callback fires with correct media_source
    - Events appear in the AppsFlyer dashboard within 1-2 minutes
    - Revenue values are correct
  </Tab>
</Tabs>

---

## Common integration mistakes

Here are the most frequent mistakes developers make when integrating ad SDKs, and how to avoid them.

<AccordionGroup>
  <Accordion title="Initializing SDKs too late">
    **The problem:** If you initialize SDKs after the app is fully loaded (e.g., after navigation is set up), you may miss the install event or early user actions.

    **The fix:** Initialize all ad SDKs as early as possible — in `AppDelegate.didFinishLaunchingWithOptions` (iOS) or `Application.onCreate` (Android). For React Native, initialize in your root component or app entry point before any navigation.
  </Accordion>

  <Accordion title="Sending events from both MMP and direct SDK">
    **The problem:** If you have AppsFlyer AND the Meta SDK both tracking the same purchase event, Meta sees two purchases for every one that actually happened.

    **The fix:** Pick one path. Either use direct SDKs for each platform, OR use an MMP. If you use an MMP, let it handle event forwarding and disable direct SDK event tracking (but keep the SDK installed for IDFA collection and deep linking).
  </Accordion>

  <Accordion title="Events not appearing in Meta Events Manager">
    **Most common causes:**
    1. SDK not initialized — check that `Settings.initializeSDK()` is called
    2. Wrong App ID — verify the ID in Info.plist / AndroidManifest matches your Meta app
    3. App in development mode — go to developers.facebook.com and toggle your app to "Live"
    4. Events delayed — Meta can take up to 20 minutes for events to appear (use Test Events for real-time)
    5. iOS: ATT denied and no SKAdNetwork IDs — some events won't be attributed
  </Accordion>

  <Accordion title="Firebase events not showing in console">
    **Most common causes:**
    1. Normal 24-hour delay — Firebase batches events and processes them with a delay. Use DebugView for real-time.
    2. Missing GoogleService-Info.plist / google-services.json — verify the files are in the correct location
    3. Firebase project mismatch — the Firebase project in your config file must match the one in the console
    4. `FirebaseApp.configure()` not called — must be the first thing in your app delegate
  </Accordion>

  <Accordion title="Duplicate events firing">
    **Most common causes:**
    1. SDK initialized multiple times — ensure initialization code only runs once (use a flag or call from AppDelegate only)
    2. Multiple tracking calls for the same action — check that your event tracking function isn't called from multiple code paths
    3. React Native: re-renders causing `useEffect` to fire multiple times — use proper dependency arrays or a ref flag
    4. Both MMP and direct SDK tracking the same event — use one or the other, not both
  </Accordion>

  <Accordion title="Purchase events with wrong values">
    **The problem:** Sending purchase amount as a string instead of a number, or forgetting the currency code. This makes ROAS calculations incorrect.

    **The fix:** Always send purchase values as numbers (not strings) and always include the ISO 4217 currency code (e.g., "USD", "EUR", "JPY"). Double-check in the platform's event manager that values appear correctly.
  </Accordion>

  <Accordion title="iOS build errors after adding SDK">
    **Most common causes:**
    1. Pod install not run — always run `cd ios && pod install && cd ..` after adding a new dependency
    2. Xcode cache — clean build folder: Product > Clean Build Folder (Shift+Cmd+K)
    3. Minimum iOS version conflict — some SDKs require iOS 13+. Check your Podfile and project settings.
    4. Swift version mismatch — ensure your project's Swift version is compatible with the SDK
    5. M1/M2 Mac issues — try `arch -x86_64 pod install` if you get architecture errors
  </Accordion>

  <Accordion title="Android build errors after adding SDK">
    **Most common causes:**
    1. Missing `google-services.json` — must be in `android/app/`, not `android/`
    2. Gradle version conflict — check that your Gradle plugin version supports the SDK's requirements
    3. Duplicate class errors — check for conflicting dependency versions. Use `./gradlew app:dependencies` to see the dependency tree.
    4. MultiDex not enabled — if your app exceeds 64K methods, enable MultiDex in your build.gradle
    5. Missing `apply plugin: 'com.google.gms.google-services'` at the bottom of app-level build.gradle
  </Accordion>

  <Accordion title="ATT prompt not showing">
    **Most common causes:**
    1. Running on simulator — ATT only works on real devices
    2. iOS version < 14.5 — ATT is only available on iOS 14.5+
    3. Already determined — if the user already responded (granted or denied), the prompt won't show again. Reset in device Settings > Privacy > Tracking.
    4. `NSUserTrackingUsageDescription` missing from Info.plist — the prompt won't show without it
    5. Called before the app is fully loaded — wait until the UI is visible
  </Accordion>

  <Accordion title="Not testing on real devices">
    **The problem:** Some SDK features (IDFA, ATT, push notifications) only work on real devices, not simulators.

    **The fix:** Always do your final SDK testing on a physical device. Use simulators for development, but verify everything on a real phone before submitting to the store.
  </Accordion>
</AccordionGroup>

---

## Testing checklist

After integrating each SDK, verify all of these before going live. Do not skip any item.

### Per-platform verification

- [ ] SDK initializes without errors on app launch (check console for error logs)
- [ ] Install event fires on first open (check platform's event manager)
- [ ] Sign-up event fires with correct parameters (test with a new account)
- [ ] Purchase event fires with correct value and currency (test with a sandbox/test purchase)
- [ ] Custom events fire with correct parameter names and values
- [ ] Events appear in the platform's dashboard within 5 minutes (real-time for Firebase debug)

### iOS-specific checks

- [ ] ATT prompt shows at the right moment (not on first launch)
- [ ] ATT opt-in properly enables advertiser tracking for Meta (`setAdvertiserTrackingEnabled`)
- [ ] ATT denial still allows SKAdNetwork attribution
- [ ] SKAdNetwork IDs are in Info.plist (for iOS attribution without IDFA)
- [ ] `NSUserTrackingUsageDescription` is in Info.plist with a clear, specific message
- [ ] Deep links open the correct screen in your app

### Android-specific checks

- [ ] `google-services.json` is in the correct directory (`android/app/`)
- [ ] Application class is registered in AndroidManifest.xml
- [ ] ProGuard/R8 rules are configured to keep SDK classes (if using code shrinking)
- [ ] GAID (Google Advertising ID) is being collected

### Cross-platform checks

- [ ] No duplicate events firing (check for double-initialization)
- [ ] Event names are consistent across platforms (same user action = same event name)
- [ ] Purchase values match between your server records and platform dashboards
- [ ] If using an MMP: events are being forwarded to all partner platforms correctly
- [ ] Debug/test mode is **disabled** before release to production

### Pre-launch final check

- [ ] Remove all `isDebug = true` and `setLogLevel(.debug)` flags
- [ ] Verify events work on a fresh install (not just an update)
- [ ] Test on both iOS and Android real devices
- [ ] Confirm conversion events appear in each ad platform's dashboard
- [ ] Document which events are tracked and their parameter schemas for your team

<Warning>
  **Test with sandbox/test purchases, not real money.** Both Apple and Google provide sandbox environments for testing in-app purchases. Use them to verify your purchase events fire correctly without spending real money. Search for "App Store Sandbox Testing" or "Google Play Test Tracks" for setup guides.
</Warning>

---

## What's next

<CardGroup cols={2}>
  <Card
    title="Analytics Setup"
    icon="chart-bar"
    href="/playbook/analytics-setup"
  >
    SDKs installed? Set up your analytics dashboard to track everything in one place and make data-driven decisions.
  </Card>
  <Card
    title="Vibe Coder Quick Start"
    icon="rocket"
    href="/playbook/vibe-coder-quick-start"
  >
    Want the fast track? Launch your first Meta Ads campaign in 60 minutes with exact settings and code.
  </Card>
</CardGroup>
